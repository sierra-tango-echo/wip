#BASE
cluster: '<%= answer.cluster %>'

#NETWORK
domainname: '<%= answer.domainname %>'

domainnetwork: '10.10.0.0'
domainnetmask: '255.255.0.0'
domaincloudID: vpc-0d0361238a6101000  #this needs to be internal to something and set each time the domain is created

networks:
  pri:
    defined: true
    interface: "em1"
    hostname: "<%= config.networks.pri.short_hostname %>.<%= config.domainname %>"
    domain: "pri"
    short_hostname: "<%= node.name %>.<%= config.networks.pri.domain %>"
    ip: "10.10.<%= node.group.index %>.<%= node.index.to_i + 100 %>"
    netmask: "255.255.224.0"
    network: "10.10.0.0"
    gateway: "10.10.0.1"
    primary: true
    named_fwd_zone: "<%= config.networks.pri.domain %>.<%= config.domainname %>"
    named_rev_zone: <% split_net = config.networks.pri.network.split(/\./) -%><%= split_net[1] %>.<%= split_net[0] %>
    firewalldzone: trusted
    pxefilename: '<%= `gethostip -x #{config.networks.pri.ip}` %>'
    cloudID: subnet-0b0ff03b770ea019a    #this needs to be internal to something and set each time the domain is created

  mgt:
    defined: true
    interface: "em2"
    hostname: "<%= config.networks.mgt.short_hostname %>.<%= config.domainname %>"
    domain: "mgt"
    short_hostname: "<%= node.name %>.<%= config.networks.mgt.domain %>"
    ip: "10.10.<%= node.group.index.to_i + 32 %>.<%= node.index.to_i + 100 %>"
    netmask: "255.255.224.0"
    network: "10.10.32.0"
    gateway:
    named_fwd_zone: "<%= config.networks.mgt.domain %>.<%= config.domainname %>"
    named_rev_zone: <% split_net = config.networks.mgt.network.split(/\./) -%><%= split_net[1] %>.<%= split_net[0] %>
    firewalldzone: trusted
    cloudID: subnet-0f4715722314aebb3   #this needs to be internal to something and set each time the domain is created

  ib:
    defined: true
    interface: "ib0"
    hostname: "<%= config.networks.ib.short_hostname %>.<%= config.domainname %>"
    domain: "ib"
    short_hostname: "<%= node.name %>.<%= config.networks.ib.domain %>"
    ip: "10.10.<%= node.group.index.to_i + 64 %>.<%= node.index.to_i + 100 %>"
    netmask: "255.255.224.0"
    network: "10.10.64.0"
    gateway:
    named_fwd_zone: "<%= config.networks.ib.domain %>.<%= config.domainname %>"
    named_rev_zone: <% split_net = config.networks.ib.network.split(/\./) -%><%= split_net[1] %>.<%= split_net[0] %>
    firewalldzone: trusted
    cloudID: subnet-01e0634994e3e0e37  #this needs to be internal to something and set each time the domain is created

  bmc:
    defined: false
    interface: bmc
    hostname: "<%= config.networks.bmc.short_hostname %>.<%= config.networks.mgt.domain %>.<%= config.domainname %>"
    domain: 'bmc'
    short_hostname: "<%= node.name %>.<%= config.networks.bmc.domain %>"
    ip: "10.10.<%= node.group.index.to_i + 48 %>.<%= node.index.to_i + 100 %>"
    netmask: "255.255.224.0"
    network: "10.10.32.0"
    gateway: 0.0.0.0
    bmcpassword: "<%= answer.ipmipassword %>"
    bmcchannel: 1
    bmcuser: admin
    bmcuserid: 2
    bmcvlan: 

role: '<%=answer.role%>'
nodescripturl: http://stevenorledge.s3.amazonaws.com/test/main.sh
